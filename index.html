<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>RoseShop â€“ Boutique</title>
  <style>
    body{font-family:Arial,sans-serif;background:#f9f9f9;margin:0}
    header{background:#e91e63;color:#fff;padding:10px;display:flex;justify-content:space-between;align-items:center}
    header h1{margin:0}
    header button{background:#fff;color:#e91e63;border:none;padding:6px 12px;border-radius:6px;cursor:pointer}
    .filters{display:flex;gap:10px;align-items:center;padding:10px;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.1)}
    .products{display:flex;gap:15px;flex-wrap:wrap;padding:20px}
    .card{background:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,.1);width:200px}
    .card button{background:#e91e63;color:#fff;border:none;padding:6px;margin-top:6px;border-radius:6px;cursor:pointer;width:100%}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center}
    .modal-content{background:#fff;padding:20px;border-radius:10px;max-width:400px;width:90%}
    .cart-item{display:flex;justify-content:space-between;padding:5px 0;border-bottom:1px solid #eee}
    input,select,button{padding:6px}
  </style>
</head>
<body>
  <header>
    <h1>RoseShop</h1>
    <button id="openCart">ğŸ›’ Panier (<span id="cartCount">0</span>)</button>
  </header>

  <!-- ğŸ” Ø¨Ø­Ø« Ùˆ ÙÙ„ØªØ± -->
  <div class="filters">
    <input type="text" id="searchInput" placeholder="ğŸ” Rechercher un produit...">
    <label>Filtrer par prix:
      <select id="priceFilter">
        <option value="all">Tous</option>
        <option value="low">Moins de 15 TND</option>
        <option value="mid">15 - 20 TND</option>
        <option value="high">Plus de 20 TND</option>
      </select>
    </label>
  </div>

  <main class="products" id="products"></main>

  <!-- Panier -->
  <div class="modal" id="cartModal">
    <div class="modal-content">
      <h2>ğŸ›’ Votre Panier</h2>
      <div id="cartItems"></div>
      <p><strong>Total: <span id="cartTotal">0</span> TND</strong></p>
      
      <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
      <input type="text" id="customerName" placeholder="âœï¸ Votre nom">
      <input type="text" id="customerPhone" placeholder="ğŸ“ Votre tÃ©lÃ©phone">
      <button id="validateOrder">âœ… Valider la commande</button>
      <button onclick="cartModal.style.display='none'">Fermer</button>
    </div>
  </div>

 <script>
  const productsList=[
    {name:"Papier de soie",price:12.9,image:"images/papier.jpg"},
    {name:"Film transparent",price:18.5,image:"images/film.jpg"},
    {name:"Sachet cadeau",price:22,image:"images/sachet.jpg"},
    {name:"Papier kraft colorÃ©",price:15,image:"images/craft.jpg"},
    {name:"Ruban satin",price:8.5,image:"images/satin.jpg"},
    {name:"BoÃ®te luxe",price:25,image:"images/boite.jpg"}
  ];

  const productsDiv=document.getElementById("products");
  const cartModal=document.getElementById("cartModal");
  const cartItemsDiv=document.getElementById("cartItems");
  const cartCount=document.getElementById("cartCount");
  const cartTotal=document.getElementById("cartTotal");
  const openCart=document.getElementById("openCart");
  const validateBtn=document.getElementById("validateOrder");
  const customerName=document.getElementById("customerName");
  const customerPhone=document.getElementById("customerPhone");
  const searchInput=document.getElementById("searchInput");
  const priceFilter=document.getElementById("priceFilter");

  let cart=[];

  // ğŸ”„ afficher produits filtrÃ©s
  function renderProducts(){
    const search=searchInput.value.toLowerCase();
    const filter=priceFilter.value;
    productsDiv.innerHTML="";

    productsList
      .filter(p=>{
        if(!p.name.toLowerCase().includes(search)) return false;
        if(filter==="low" && p.price>=15) return false;
        if(filter==="mid" && (p.price<15 || p.price>20)) return false;
        if(filter==="high" && p.price<=20) return false;
        return true;
      })
      .forEach(p=>{
        const card=document.createElement("div");
        card.className="card";
        card.innerHTML=`
          <img src="${p.image}" alt="${p.name}" style="width:100%;border-radius:6px;margin-bottom:8px">
          <h3>${p.name}</h3>
          <p>${p.price} TND</p>
          <label>QuantitÃ©: <input type='number' value='1' min='1' style='width:60px'></label>
          <button>Ajouter au panier</button>
        `;
       
        const qtyInput=card.querySelector("input");
        const addBtn=card.querySelector("button");

        addBtn.onclick=()=>{
          const qty=parseInt(qtyInput.value)||1;
          cart.push({...p,qty});
          updateCart();
        };

        productsDiv.appendChild(card);
      });
  }

  function updateCart(){
    cartItemsDiv.innerHTML="";
    let total=0;
    cart.forEach(item=>{
      total+=item.price*item.qty;
      const div=document.createElement("div");
      div.className="cart-item";
      div.textContent=`${item.name} (x${item.qty}) - ${(item.price*item.qty).toFixed(3)} TND`;
      cartItemsDiv.appendChild(div);
    });
    cartCount.textContent=cart.length;
    cartTotal.textContent=total.toFixed(3);
  }

  openCart.onclick=()=>cartModal.style.display="flex";

  validateBtn.onclick=()=>{
    if(cart.length===0){alert("Panier vide !");return;}
    if(customerName.value.trim()===""){alert("Veuillez entrer votre nom");return;}
    if(customerPhone.value.trim()===""){alert("Veuillez entrer votre tÃ©lÃ©phone");return;}

    const orders=JSON.parse(localStorage.getItem("orders")||"[]");
    const newOrder={
      id:Date.now(),
      client:customerName.value,
      phone:customerPhone.value,
      items:cart,
      total:parseFloat(cartTotal.textContent),
      date:new Date().toLocaleString()
    };
    orders.push(newOrder);
    localStorage.setItem("orders",JSON.stringify(orders));
    alert("âœ… Commande envoyÃ©e !");
    cart=[];updateCart();cartModal.style.display="none";customerName.value="";customerPhone.value="";
  };

  searchInput.oninput=renderProducts;
  priceFilter.onchange=renderProducts;

  renderProducts();
</script>
  <!-- Firebase App -->
<script type="module">
  // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } 
    from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

  // âœ… Ù‡Ù†Ø§ ØªÙ„ØµÙ‚ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù…Ù† Firebase console
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Ù…Ø«Ø§Ù„: Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù€ Firestore
  async function addOrder() {
    try {
      await addDoc(collection(db, "orders"), {
        clientName: "Mahdi",
        phone: "22233444",
        product: "Rose Rouge",
        price: 25,
        status: "en attente",
        createdAt: serverTimestamp()
      });
      alert("âœ… Ø§Ù„Ø·Ù„Ø¨ ØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡ !");
    } catch (e) {
      console.error("Ø®Ø·Ø£:", e);
    }
  }

  // Ù†Ø±Ø¨Ø· Ø§Ù„Ø²Ø± Ø¨Ø§Ù„ÙˆØ¸ÙŠÙØ©
  document.getElementById("btnOrder").addEventListener("click", addOrder);
</script>
</body>
</html>




